
import re
from telnetlib import PRAGMA_HEARTBEAT

txt = '{"head":{"status":200},"body":{"meta":{"l":["/orderDetail"],"h":{"x-aos-model-page":"OrderStatusDetail","modelVersion":"v2","x-aos-stk":"e06d3d047ad3fd4429bfc2c0b6d418626ea68b327a0f8ba7cba629b0115a9b7d","syntax":"graviton"}},"abs":{"Footnotes":{},"OrderHeader":{},"OrderItems":{},"OrderItem":{"b":{"returnItem":{"id":{"op":"ADD","args":[{"get":"d.id"},"-returnItem"]},"events":[{"on":"click","do":"a.returnItem","metric":"t.returnLink"}]},"cancelItem":{"id":{"op":"ADD","args":[{"get":"d.id"},"-cancelItem"]},"events":[{"on":"click","do":"a.cancelItem","metric":"t.cancelLink"}]}},"t":{"returnLink":{"microEvents":[{"key":"eVar21","value":{"get":"d.returnLinkMicroEvent"}}]},"cancelLink":{"microEvents":[{"key":"eVar21","value":{"get":"d.cancelLinkMicroEvent"}}]}}},"OrderItemActions":{},"OrderItemChildren":{},"OrderItemDetails":{},"OrderItemNotifications":{},"OrderItemStatusTracker":{},"ShippingInfo":{"b":{"editShippingAddress":{"id":{"op":"ADD","args":[{"get":"d.id"},"-editShippingAddress"]},"events":[{"on":"click","do":"a.editShippingAddress"}]},"editNotification":{"id":{"op":"ADD","args":[{"get":"d.id"},"-editNotification"]},"events":[{"on":"click","do":"a.editNotification"}]}}},"Olss-pickup-contact":{},"Shipping-address":{},"Shipping-notification":{},"PricingSummary":{}},"orderDetail":{"d":{"signInMicroEvent":"AOS:Order Details| OLSS | Sign In","fullOrderDetailMicroEvent":"| OLSS | full order details","orderDetailMicroEvent":" Order Details","viewOrdersUrl":"https://secure8.store.apple.com/shop/order/list?_a=selected-address-submit&_m=orderDetail.orderItems.orderItem-0000101.shippingInfo.editShippingInfo.suggested-shipping-addresses","orderHasIUpWithoutLoanItem":false,"isACDCModel":false,"isUpgradeOrder":false,"isTradeInOrder":false,"hasESimItem":true,"signInURL":"https://secure8.store.apple.com/shop/order/detail/10078/W1082863426?_a=selected-address-submit&_m=orderDetail.orderItems.orderItem-0000101.shippingInfo.editShippingInfo.suggested-shipping-addresses","guestOrder":false,"purchaseOrderTypeEvent":"| member | W1082863426","isCAOrder":false},"b":{"orderDetails":{"id":"orderDetail-info","events":[{"on":"load","delay":1000,"metric":"t.orderDetails"}]},"signIn":{"id":"orderDetail-info","events":[{"on":"load","delay":1000,"metric":"t.signIn"}]},"fullOrderDetail":{"id":"orderDetail-info","events":[{"on":"load","delay":1000,"metric":"t.fullOrderDetail"}]}},"t":{"orderDetails":{"microEvents":[{"key":"eVar21","value":{"get":"d.orderDetailMicroEvent"}},{"key":"prop22","value":{"get":"d.purchaseOrderTypeEvent"}}]},"signIn":{"microEvents":[{"key":"prop37","value":"GuestCheckout:ExistingSignedIn"}]},"fullOrderDetail":{"microEvents":[{"key":"eVar21","value":{"get":"d.fullOrderDetailMicroEvent"}}]}},"c":["billingInfo","footnotes","orderHeader","orderItems","pricingSummary"],"billingInfo":{"d":{"installmentsString":"0","orderInstallmentAmount":null,"giftCardCount":0,"showCardDetailsForCitizenPayment":true,"a11yLabel":"APID","appleBalanceDetails":[{"a11yLabel":"","paymentMethodPaymentTypeName":"APPLE_BALANCE","accountNumber":""}],"isInternationalCC":true,"isSingleCCpayment":true,"cardDetails":[],"splitPayment":false,"billingContactOverlayStatus":false,"canEditBillingContact":true},"b":{"editBillingContact":{"id":"orderDetail-billingInfo-editBillingContact","events":[{"on":"click","do":"a.editBillingContact"}]}},"a":{"editBillingContact":{"url":"https://secure8.store.apple.com/shop/order/detailx/10078/W1082863426?_a=editBillingContact&_m=orderDetail.billingInfo"}},"c":["billing-address","billing-contact-info","invoice-address"],"billing-address":{"d":{"city":"Beacon, ","state":"NY","showLocationConsent":true,"lastName":"Raymond","firstName":"Thompson ","companyName":"","mode":"VIEW","street":"3377  Trymore Road","layout":[{"fields":[[{"name":"firstName","type":"text","label":"First Name"},{"name":"lastName","type":"text","label":"Last Name"}],[{"name":"companyName","type":"text","label":"Company Name (Optional)"}],[{"name":"street","type":"text","label":"Street Address"}],[{"name":"street2","type":"text","label":"Apt, Suite, Building (Optional)","labelA11y":"Apartment, Suite, Building (Optional)"}],[{"name":"city","type":"text","label":"City"},{"name":"state","type":"text","label":"State"},{"name":"postalCode","type":"text","label":"Zip Code"}]]}],"postalCode":"12500","street2":""}},"billing-contact-info":{"d":{"daytimePhone":"••••••••09","mode":"VIEW","layout":[{"fields":[[{"name":"emailAddress","type":"text","label":"Email Address"}],[{"name":"daytimePhone","type":"text","label":"Primary Phone"}]]}],"showLocationConsent":true,"emailAddress":"p••••••••a@hotmail.com"}},"invoice-address":{"d":{"city":"Beacon, ","state":"NY","showLocationConsent":true,"lastName":"Raymond","firstName":"Thompson ","companyName":"","mode":"VIEW","street":"3377  Trymore Road","layout":[{"fields":[[{"name":"firstName","type":"text","label":"First Name"},{"name":"lastName","type":"text","label":"Last Name"}],[{"name":"companyName","type":"text","label":"Company Name (Optional)"}],[{"name":"street","type":"text","label":"Street Address"}],[{"name":"street2","type":"text","label":"Apt, Suite, Building (Optional)","labelA11y":"Apartment, Suite, Building (Optional)"}],[{"name":"city","type":"text","label":"City"},{"name":"state","type":"text","label":"State"},{"name":"postalCode","type":"text","label":"Zip Code"}]]}],"postalCode":"12500","street2":""}}},"footnotes":{"f":{"abstract":"/abs.Footnotes"},"d":{"id":"orderDetail-footnotes"}},"orderHeader":{"f":{"abstract":"/abs.OrderHeader"},"d":{"orderNumber":"W1082863426","isReturnKitOrder":false,"orderPlacedDate":"June 15, 2024","id":"orderDetail-orderHeader","isSMB":false}},"orderItems":{"f":{"abstract":"/abs.OrderItems"},"d":{"id":"orderItems"},"c":["orderItem-0000101"],"orderItem-0000101":{"f":{"abstract":"/abs.OrderItem"},"d":{"cancelInfoLink":false,"cancelLinkMicroEvent":"| OLSS | Cancel item","id":"orderItem-0000101","deliveryType":"HOME","returnEligible":false,"returnLinkMicroEvent":"| Return | Return Item","returnOverlayStatus":false,"cancelEligible":true,"cancelOverlayStatus":false},"a":{"returnItem":{"url":"https://secure8.store.apple.com/shop/order/detailx/10078/W1082863426?_a=returnItem&_m=orderDetail.orderItems.orderItem-0000101"},"cancelItem":{"url":"https://secure8.store.apple.com/shop/order/detailx/10078/W1082863426?_a=cancelItem&_m=orderDetail.orderItems.orderItem-0000101"}},"c":["orderItemActions","orderItemChildren","orderItemDetails","orderItemNotifications","orderItemStatusTracker","shippingInfo"],"orderItemActions":{"f":{"abstract":"/abs.OrderItemActions"},"d":{"id":"orderItem-0000101-orderItemActions"}},"orderItemChildren":{"f":{"abstract":"/abs.OrderItemChildren"},"d":{"id":"orderItem-0000101-orderItemChildren","removedList":[]}},"orderItemDetails":{"f":{"abstract":"/abs.OrderItemDetails"},"d":{"quantity":1,"isIncludeOnlinePersonalSetupLink":false,"deliveryDate":"Arrives Jun 21 - Jun 25","itemShortName":"iPhone 15 Pro Max","totalPrice":"$1,199.00","locale":"en_US","isRolledUp":false,"cid":"trx-ww-sgfo-olss","imageData":{"data-scale-params-2":"wid=1080&hei=1080&align=0%2C-1&fmt=jpeg&qlt=90&fit=constrain&.v=1692893982740","src":"https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-pro-max-naturaltitanium-select?wid=540&hei=540&align=0%2C-1&fmt=jpeg&qlt=90&fit=constrain&.v=1692893982740","alt":"","width":540,"height":540},"carrierFinancedPromoItem":false,"period":"","showRecycleFee":false,"id":"orderItem","installmentApr":"0","productName":"iPhone 15 Pro Max 256GB Natural Titanium","listPrice":"$1,199.00"}},"orderItemNotifications":{"f":{"abstract":"/abs.OrderItemNotifications"},"d":{"id":"orderItemNotifications","emailAddress":"p••••••••a@hotmail.com"}},"orderItemStatusTracker":{"f":{"abstract":"/abs.OrderItemStatusTracker"},"d":{"statusDescription":"PROCESSING_LONG","animateTracker":true,"possibleStatuses":["PLACED","PROCESSING","PREPARED_FOR_SHIPMENT","SHIPPED","DELIVERED"],"id":"orderItem-0000101-orderItemStatusTracker","isFinanced":false,"currentStatus":"PROCESSING"}},"shippingInfo":{"f":{"abstract":"/abs.ShippingInfo"},"d":{"canEditNotification":true,"isIDLItem":false,"isLMFConfig":true,"canEditShippingAddress":true,"id":"orderItem-0000101-shippingInfo","canEditPickupContact":false,"shipmentMethod":"Express Delivery","hasCarrierService":false,"shippingOverlayStatus":false},"a":{"editShippingAddress":{"url":"https://secure8.store.apple.com/shop/order/detailx/10078/W1082863426?_a=editShippingAddress&_m=orderDetail.orderItems.orderItem-0000101.shippingInfo"},"editNotification":{"url":"https://secure8.store.apple.com/shop/order/detailx/10078/W1082863426?_a=editNotification&_m=orderDetail.orderItems.orderItem-0000101.shippingInfo"}},"c":["olss-pickup-contact","shipping-address","shipping-notification"],"olss-pickup-contact":{"f":{"abstract":"/abs.Olss-pickup-contact"},"d":{"lastName":"Raymond","daytimePhone":"••••••••09","mode":"VIEW","layout":[{"fields":[[{"name":"firstName","type":"text","label":"First Name"},{"name":"lastName","type":"text","label":"Last Name"}],[{"name":"daytimePhone","type":"text","label":"Primary Phone"}],[{"name":"emailAddress","type":"text","label":"Email Address"}]]}],"showLocationConsent":true,"emailAddress":"p••••••••a@hotmail.com","firstName":"Thompson ","id":"orderItem-0000101-shippingInfo-olss-pickup-contact"}},"shipping-address":{"f":{"abstract":"/abs.Shipping-address"},"d":{"city":"BEACON, ","state":"NY","showLocationConsent":true,"lastName":"Raymond","companyName":"","mode":"VIEW","street":"3377  Trymore Road","layout":[{"fields":[[{"name":"firstName","type":"text","label":"First Name"},{"name":"lastName","type":"text","label":"Last Name"}],[{"name":"companyName","type":"text","label":"Company Name (Optional)"}],[{"name":"street","type":"text","label":"Street Address"}],[{"name":"street2","type":"text","label":"Apt, Suite, Building (Optional)","labelA11y":"Apartment, Suite, Building (Optional)"}],[{"name":"city","type":"text","label":"City"},{"name":"state","type":"text","label":"State"},{"name":"postalCode","type":"text","label":"Zip Code"}]]}],"postalCode":"12500","street2":"","firstName":"Thompson ","id":"orderItem-0000101-shippingInfo-shipping-address"}},"shipping-notification":{"f":{"abstract":"/abs.Shipping-notification"},"d":{"id":"orderItem-0000101-shippingInfo-shipping-notification","mode":"VIEW","layout":[{"fields":[[{"name":"emailAddress","type":"text","label":"Email Address"}]]}],"showLocationConsent":true,"emailAddress":"p••••••••a@hotmail.com"}}}}},"pricingSummary":{"f":{"abstract":"/abs.PricingSummary"},"d":{"isFreeShipping":true,"isUpgradeOrder":false,"taxAmount":"$97.42","id":"orderDetail-pricingSummary","isVatIncluded":false,"isSpanishGeo":false,"subTotal":"$1,199.00","isACDCModel":false,"orderTotal":"$1,296.42","shippingCharge":"$0.00","taxEstimatedHelpMessage":"<h4>Estimated Tax</h4><p>The sales tax listed on the order history page is only an estimate. The final total sales tax will be reflected on your invoice and will include state and local sales taxes, as well as any applicable rebates or fees. In CA and RI sales tax is collected on the unbundled price of the iPhone.</p>"}}}}}'

pattern = r'"/abs.Shipping-address"}\s*,\s*"d":\s*\{.*?"postalCode":\s*"\d+".*?"street2":\s*"[^"]+".*?"firstName":\s*"[^"]+".*?"id":\s*"orderItem-\d+-shippingInfo-shipping-address"'
match = re.search(pattern, txt, re.DOTALL)
matched_text = match.group(0)
def get_field_value(field_name):
                # 为每个字段创建一个正则表达式模式
                field_pattern = rf"'{field_name}':\s*'([^']*)'"
                # 在整个文本中搜索字段
                match = re.search(field_pattern, matched_text)
                # 如果找到匹配项，则返回匹配的值，否则返回 None
                return match.group(1) if match else None

result = {
                "city": get_field_value("city"),
                "state": get_field_value("state"),
                "lastName": get_field_value("lastName"),
                "firstName": get_field_value("firstName"),
                "companyName": get_field_value("companyName"),
                "street": get_field_value("street"),
                "postalCode": get_field_value("postalCode"),
                "street2": get_field_value("street2"),
            }

print(result)